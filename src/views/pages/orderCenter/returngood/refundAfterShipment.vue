<template>
  <!-- 发货后退款 -->
  <div id="cbx" class="refundAfterShipment public-main custom-main">
    <div class="re_button custom-btn">
      <OmsButton :btn-config="btnConfig" />
    </div>
    <div class="public-content">
      <div class="re_form">
        <Collapse v-model="value">
          <Panel name="1">
            <!-- 基础资料 -->
            {{ $it("pL.basicData") }}
            <p slot="content" class="basic-message">
              <ImageUpload
                :dataitem="imageUploadConfig"
                @deleteImg="deleteImg"
                @uploadFileChangeSuccess="uploadFileChangeSuccess"
              />
              <FormLayout
                ref="FormLayout"
                :default-column="reForm.defaultColumn"
                :defaultconfig="reForm.config"
                class="basic-message-form"
              >
                <div slot="CBX" class="cbx">
                  <i style="color: #ff9900; padding: 0 6px">*</i>
                  <!-- 退款类型 -->
                  {{ $it("fL.refundType") }}
                  :&nbsp;&nbsp;&nbsp;&nbsp;
                  <RadioGroup v-model="BILL_TYPE" @on-change="billTypeChange">
                    <!-- 仅退款 -->
                    <Radio label="1">
                      {{ $it("fL.refundOnly") }}
                    </Radio>
                    <!-- 退货退款 -->
                    <Radio
                      v-if="
                        $route.params.customizedModuleName ===
                        'REFUNDAFTERSHIPMENT'
                      "
                      label="0"
                    >
                      {{ $it("fL.returnRefund") }}
                    </Radio>
                  </RadioGroup>
                </div>
                <div slot="returnType" class="returnType">
                  <OmsForm :form-config="returnTypeFormConfig" />
                </div>
                <div slot="returnTypeItem" class="returnType">
                  <OmsForm :form-config="returnTypeItemConfig" />
                </div>
              </FormLayout>
            </p>
          </Panel>
          <Panel v-if="!$route.query.new" name="2">
            <!-- 日志 -->
            {{ $it("pL.log") }}
            <div slot="content">
              <OmsForm :form-config="logFormConfig" />
            </div>
          </Panel>
        </Collapse>
      </div>
      <div class="tab-content custom-table">
        <div class="tab-content-navTab">
          <p :class="navStatus === 0 ? 'action' : ''" @click="navStatus = 0">
            <!-- 退款单详情 -->
            {{ $it("pL.refundSlipDetails") }}
          </p>
          <p
            v-if="$route.query.customizedModuleId !== 'New'"
            :class="navStatus === 1 ? 'action' : ''"
            @click="navStatus = 1"
          >
            日志
          </p>
        </div>
        <div v-show="navStatus === 0" class="re_table">
          <OmsTable
            :jordan-table-config="tableConfig"
            @on-page-change="tabllePageChange"
            @on-page-size-change="tabllePageSizeChange"
            @on-select="onDel"
            @on-select-all="onDel"
            @on-select-all-cancel="onDel"
            @on-select-cancel="onDel"
            @table-add-detail="tableAddDetail"
            @table-delete-detail="tableDeleteDetail"
          />
        </div>
        <!-- 日志 -->
        <div v-show="navStatus === 1" class="re_table">
          <OmsTable
            v-loading="returnLogTableLoad"
            :jordanTableConfig="returnLogTableConfig"
          />
        </div>
      </div>
      <div class="queryorderB">
        <!-- 查询原始订单编号  -->
        <Modal
          v-model="order.modal"
          :mask="true"
          :title="$it('pL.refundSlipDetails')"
          :width="800"
          class="queryorder"
          @on-cancel="querycancel"
          @on-ok="queryorder"
        >
          <div class="orderContent">
            <OmsForm :form-config="order.orderform" />
            <OmsButton :btn-config="order.btn" />
          </div>
          <OmsTable
            :jordan-table-config="order.table"
            @on-select="onSelectOrder"
            @on-current-change="onCurrentChange"
          />
        </Modal>
      </div>
      <div class="addItem">
        <!--  原始退单明细 -->
        <Modal
          v-model="addItem.modal"
          :mask="true"
          :title="$it('mT.originalChargebackDetails')"
          :width="800"
          @on-cancel="addItemCancel"
          @on-ok="onAddItem"
        >
          <OmsTable
            :jordan-table-config="addItem.table"
            @on-select="onSelect"
            @on-select-all="onSelect"
            @on-select-all-cancel="onSelect"
            @on-select-cancel="onSelect"
          />
        </Modal>
        <Modal v-model="isModal" title="提示" @on-ok="deleteImgBySure">
          <!-- 点击后将删除凭证,是否继续? -->
          <p>{{ $it("tip.z5") }}</p>
        </Modal>
      </div>
    </div>
  </div>
</template>
<script>
import orderItem from '@/js/pages/orderCenter/returngood/refundAfterShipment';

export default orderItem;
</script>

<style lang='less' scoped>
@import "~@/css/pages/orderCenter/returngood/refundAfterShipment.less";
</style>
