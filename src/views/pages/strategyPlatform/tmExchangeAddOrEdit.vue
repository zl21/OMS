<template>
  <!--  天猫换货策略  -->
  <div class="customized-detail" v-loading="loading">
    <div class="customized-detail-btn">
      <OmsButton :btn-config="btnConfig" />
    </div>
    <div class="customized-detail-main">
      <Collapse v-model="panelDefaultValue">
        <Panel name="panel_baseInfo">
          <!-- 基础资料 -->
          {{ $it('pL.basicData') }}
          <div slot="content" class="customized_Info_form">
            <OmsForm :form-config="formConfig1" />
          </div>
        </Panel>
        <Panel name="panel_condition" class="wrap">
          <!-- 满足条件 -->
          {{ $it('form_label.meet_conditions') }}
          <p slot="content">
            <!-- 自动同意换货 -->
            <label>{{ $it('form_label.e3') }}:</label>
            <OmsForm :form-config="formConfig2">
              <template #exchangeDesc="{ rowData }">
                <div class="changeForm">
                  <div class="preLable">
                    <i-switch
                      size="small"
                      v-model="rowData.value.IS_AUTO_APPROVE"
                      :disabled="isEnable"
                      @on-change="rowData.item.switchChange"
                      class="switch"
                    />
                    <label
                      :title="rowData.item.label"
                      :class="['cust-label', 'required', { hidden: !rowData.value.IS_AUTO_APPROVE }]"
                    >
                      <i>*</i>{{ rowData.item.label }}：
                    </label>
                  </div>
                  <div class="changeFormInput">
                    <CheckboxGroup
                      v-model="rowData.value.EXCHANGE_DESC"
                      @on-change="rowData.item.checkChange"
                      style="padding-left: 10px; width: 310px;">
                      <Checkbox
                        v-for="(option , index) in rowData.item.options"
                        :key="index"
                        :label="option.value"
                        :disabled="isEnable"
                      >{{option.label}}</Checkbox>
                    </CheckboxGroup>
                  </div>
                  <div class="changeFormInput">
                    <label
                      :title="rowData.item.subLabel"
                      :class="['cust-form-label', 'required', { hidden: !rowData.value.IS_AUTO_APPROVE }]"
                    >
                      <i>*</i><span>{{ rowData.item.subLabel }}：</span>
                    </label>
                    <Input
                      v-model="rowData.value.AOTU_APPROVE_DEVIATION_PRICE"
                      :disabled="isEnable"
                      :autosize="{minRows: 2,maxRows: 5}"
                      :placeholder="$it('pHolder.enter')"
                      @on-change="rowData.item.inputChange"
                      :regx="rowData.item.regx"
                      style="width: 150px;"
                    />
                  </div>
                </div>
              </template>
            </OmsForm>
            <!-- 自动拒绝换货 -->
            <label style="position: relative; top: 12px;">{{ $it('form_label.e4') }}:</label>
            <OmsForm :form-config="formConfig2">
              <template #stockout="{ rowData }">
                <div class="changeForm">
                  <div class="preLable">
                    <i-switch
                      size="small"
                      v-model="rowData.value.OOS_AUTO_REJECT"
                      :disabled="isEnable"
                      @on-change="rowData.item.switchChange" 
                      class="switch"
                    />
                    <label
                      :title="rowData.item.label"
                      class="cust-label"
                    >{{ rowData.item.label }}：</label>
                  </div>
                  <div class="changeFormInput">
                    <label
                      :title="rowData.item.subLabel1"
                      :class="['cust-form-label', 'required', { hidden: !rowData.value.OOS_AUTO_REJECT }]"
                    >
                      <i>*</i>{{ rowData.item.subLabel1 }}：
                    </label>
                    <Select
                      v-model="rowData.value.OOS_AUTO_REJECT_REASON_ID"
                      @on-change="(val) => rowData.item.selectChange(val)"
                      :disabled="isEnable"
                      label-in-value
                      style="width: 150px;">
                      <Option
                        v-for="item in rowData.item.options"
                        :value="item.value"
                        :key="item.value"
                      >{{ item.label }}</Option>
                    </Select>
                  </div>
                  <div class="changeFormInput">
                    <label
                      :title="rowData.item.subLabel2"
                      class="cust-form-label"
                    >{{ rowData.item.subLabel2 }}：</label>
                    <Input
                      v-model="rowData.value.OOS_AUTO_REJECT_DESC"
                      :maxlength="250"
                      :disabled="isEnable"
                      :autosize="{minRows: 2,maxRows: 5}"
                      :placeholder="$it('pHolder.enter')"
                      @on-change="rowData.item.inputChange"
                      style="width: 150px;"
                    />
                  </div>
                </div>
              </template>
              <template #bias="{ rowData }">
                <div class="changeForm">
                  <div class="preLable">
                    <i-switch
                      size="small"
                      v-model="rowData.value.DEVIATION_AUTO_REJECT"
                      :disabled="isEnable"
                      @on-change="rowData.item.switchChange"
                      class="switch"
                    />
                    <label
                      :title="rowData.item.label"
                      class="cust-label"
                    >{{ rowData.item.label }}：</label>
                  </div>
                  <div class="changeFormInput">
                    <label
                      :title="rowData.item.subLabel1"
                      :class="['cust-form-label', 'required', { hidden: !rowData.value.DEVIATION_AUTO_REJECT }]"
                    >
                      <i>*</i>{{ rowData.item.subLabel1 }}：
                    </label>
                    <Input
                      v-model="rowData.value.AUTO_REJECT_DEVIATION_PRICE"
                      :disabled="isEnable"
                      :autosize="{minRows: 2,maxRows: 5}"
                      :regx="rowData.item.regx"
                      :placeholder="$it('pHolder.enter')"
                      @on-change="rowData.item.inputChange"
                      style="width: 150px;"
                    />
                  </div>
                  <div class="changeFormInput">
                    <label
                      :title="rowData.item.subLabel2"
                      :class="['cust-form-label', 'required', { hidden: !rowData.value.DEVIATION_AUTO_REJECT }]"
                    >
                      <i>*</i>{{ rowData.item.subLabel2 }}：
                    </label>
                    <Select
                      v-model="rowData.value.DEVIATION_AUTO_REJECT_REASON_ID"
                      @on-change="(e) => rowData.item.selectChange(e)"
                      :disabled="isEnable"
                      label-in-value style="width: 150px;">
                      <Option
                        v-for="item in rowData.item.options"
                        :value="item.value"
                        :key="item.value">
                        {{ item.label }}
                      </Option>
                    </Select>
                  </div>
                  <div class="changeFormInput last">
                    <label
                      :title="rowData.item.subLabel3"
                      class="cust-form-label"
                    >{{ rowData.item.subLabel3 }}：</label>
                    <Input v-model="rowData.value.DEVIATION_AUTO_REJECT_DESC"
                      :maxlength="250"
                      :disabled="isEnable"
                      :autosize="{minRows: 2,maxRows: 5}"
                      :placeholder="$it('pHolder.enter')"
                      @on-change="rowData.item.inputChange2"
                      style="width: 400px;"
                    />
                  </div>
                </div>
              </template>
            </OmsForm>
          </p>
        </Panel>
      </Collapse>
      <div v-if="ID !== '-1'" class="customized-detail-table">
        <!-- tab切换 -->
        <OmsLabel :label-list="labelList" :label-default-value="labelDefaultValue" />
        <!-- 子表Part -->
        <div class="subtablePart">
          <subTable :component-data="subTableConfig"></subTable>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import tmExchangeAddOrEdit from '@/js/pages/strategyPlatform/tmExchangeAddOrEdit.js';
export default tmExchangeAddOrEdit;
</script>

<style lang="less" scoped>
@import "~@/css/pages/strategyPlatform/tmExchangeAddOrEdit.less";
</style>
