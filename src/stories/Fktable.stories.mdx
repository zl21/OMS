import { Meta } from '@storybook/addon-docs';

<Meta title="BASIC/Fktable" />

<style>{`
	.subheading {
		font-weight: 900;
		font-size: 13px;
		line-height: 24px;
		margin: 40px 0 12px 0;
	}
`}</style>

<!-- # 安装

<div className="subheading">NPM 安装</div> -->

# Fktable

### 一、组件说明

#### 1. 概述

外键关联下拉选择 table 组件，内置封装了两个接口，查询列表：`/p/cs/QueryList`，模糊搜索：`/p/cs/fuzzyquerybyak`，接口网关配置`itemdata.serviceId`，默认无网关。

#### 2. 应用场景

用于外键关联下拉选择，可单选、多选。

### 二、配置项说明

```js
props: {
  version:"1.4"
  colname:"CP_C_SHOP_ID"
  fkid:169130
  single:true
  inputBox:false
  itemdata: {
    col:1,
    "colid":169130,
    "colname":"CP_C_SHOP_ID",
    "datelimit":"all",
    "display":"text",
    "fkdisplay":"drp",
    "fkdesc":"店铺",
    "inputname":"CP_C_SHOP_ID:ECODE",
    "isfk":true,
    "isnotnull":true,
    "isuppercase":false,
    "length":65535,
    "name":"店铺","readonly":false,
    "reftable":"CP_C_SHOP",
    "reftableid":10348,
    "row":1,
    "statsize":-1,
    "type":"STRING",
    "valuedata":"Mini巴拉唯品会童鞋店",
    "pid":"75"
  }
}
```

### 三、使用说明

> xxx.vue

```js
 <Fktable
    :version="version"
    :input-box="inputbox"
    :fkid="itemdata.colid"
    :single="itemdata.fkdisplay === 'drp' ? true : false"
    :item="getFixedColumns(itemdata)"
    :precolnameslist="itemdata.precolnameslist"
    :colname="itemdata.colname"
    :itemdata="itemdata"
    @pop="fktableShow"
  />
```

![fktable-1.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ff9d009be9fd4abaaef5ea70ae817890~tplv-k3u1fbpfcp-watermark.image?)
![fktable-2.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/29c771b494ca4ab5aee97bb4b9e22e72~tplv-k3u1fbpfcp-watermark.image?)

### 四、API

#### fktable Props

| 属性               | 说明                                      | 类型          | 默认值 |
| ------------------ | ----------------------------------------- | ------------- | ------ |
| version            | 版本号，新旧版本区分，可选值为`1.3`,`1.4` | String        | -      |
| colname            | 外键关联字段名称                          | String        | -      |
| fkid               | 外键关联字段 id                           | Number/String | -      |
| single             | 是否是单选                                | Boolean       | false  |
| itemdata           | 外键关联字段相关配置                      | Object        | -      |
| inputBox           | 是否展示模糊搜索数据的下拉                | Boolean       | true   |
| defaultSelectedIds | 选中列的 ids                              | String/Array  | []     |
| precolnameslist    | 过滤条件                                  | Array         | []     |
| refcolprem         | 关联过滤条件                              | String        | -      |
| row                | 选中列的数据                              | Object        | -      |
| rowId              |                                           | String        | -      |
| inputname          |                                           | String        | -      |
| flag               |                                           | String        | -      |
| fktable            |                                           | String        | -      |
| col                |                                           | String        | -      |
| item               |                                           | Number        | -      |

#### fkdialog events

| 事件 | 说明           | 返回值                                                                                                                     |
| ---- | -------------- | -------------------------------------------------------------------------------------------------------------------------- |
| pop  | 当值改变时触发 | 选中项，eg: {"index": 'colname', "inputname": '', "idArr": [], "desc": [], "item": [], "row": {}, "col": '', "rowId": '' } |
